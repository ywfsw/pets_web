<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">

    <title>å® ç‰©ç®¡å®¶</title>
</head>
<body>

<div id="app" class="container">

    <header>
        <nav>
            <ul><li><strong>ğŸ¾ å® ç‰©ç®¡å®¶</strong></li></ul>
            <ul><li><a href="#" @click.prevent="showPage('home')">é¦–é¡µ</a></li></ul>
        </nav>
    </header>

    <hr>

    <main>
        <article>
            <h2>{{ message }}</h2>
            <p></p>

            <button @click="callApi" :aria-busy="loading">
                æµ‹è¯•åç«¯ Ping æ¥å£
            </button>

            <div v-if="apiResponse">
                <hr>
                <pre><code>API å“åº”: {{ apiResponse }}</code></pre>
            </div>

        </article>
    </main>

    <footer>
        <small>ç”± Spring Boot & Pico.css å¼ºåŠ›é©±åŠ¨</small>
    </footer>

</div> <script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
    const { createApp, ref } = Vue;

    createApp({
        setup() {
            // --- å˜é‡ ---
            const message = ref('Hello!');
            const loading = ref(false);
            const apiResponse = ref(null);

            // ä½ çš„ Render åç«¯ API åœ°å€
            // â—â—â— ç¡®ä¿ä½ å·²ç»åœ¨ Spring Boot ä¸Šè®¾ç½®äº† @CrossOrigin("*") â—â—â—
            const API_BASE_URL = 'https://pets-why3.onrender.com';

            // --- æ–¹æ³• ---
            const callApi = () => {
                loading.value = true;
                apiResponse.value = null;

                axios.get(API_BASE_URL + '/ping')
                    .then(response => {
                        apiResponse.value = response.data;
                    })
                    .catch(error => {
                        apiResponse.value = 'è¯·æ±‚å¤±è´¥: ' + error.message;
                    })
                    .finally(() => {
                        loading.value = false;
                    });
            };

            const showPage = (pageName) => {
                console.log('åˆ‡æ¢åˆ°é¡µé¢:', pageName);
                // è¿™é‡Œä»¥åå¯ä»¥å†™åˆ‡æ¢é¡µé¢çš„é€»è¾‘
            }

            // --- è¿”å› ---
            return {
                message,
                loading,
                apiResponse,
                callApi,
                showPage
            };
        }
    }).mount('#app'); // æŒ‚è½½åˆ° <div id="app">
</script>

</body>
</html>
